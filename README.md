# python-namumark-parser
php-namumark는 나무위키에서 사용되는 나무마크를 python 언어를 이용해서 HTML과 미디어위키 문법에 맞게 변환하는 도구입니다.

본 라이브러리는 koreapyj님의 [PHP-namumark](https://github.com/koreapyj/php-namumark) 를 참조해서 만들었습니다. 

## 라이선스
본 라이브러리는 원본 소스에 따라 GNU Affero GPL 3.0에 따라 자유롭게 사용하실 수 있습니다. 

## 사용 방법
python 파일을 이용해서 텍스트 파일 하나를 미디어위키 문법으로 치환하는 기능을 제공하고 있습니다. 아직 완성되지 않은 점에 유의바랍니다.

1. 파이선을 설치합니다. 최소 3.6 버전 이상이 설치되어 있어야 하고, 3.8버전 이상을 권장합니다. 명령 프롬프트 창을 통해서 실행할 수 있는 준비가 되어있어야 합니다.
1. 다음 이 파서를 다운로드받습니다. 
1. main.py가 있는 디렉토리에 나무마크로 작성된 텍스트 파일 하나를 작성합니다. (예시: test.txt)
1. 커맨드 창으로 main.py가 있는 디렉토리에 들어가서 다음과 같이 코드를 실행시키면 문법 변환이 작동합니다.
1. 파일명에서는 확장자는 생략해서 입력하고, 변환결과 파일명을 생략하면 변환 결과가 mw.txt로 저장됩니다.
```
   python main.py (변환대상 파일명) (변환결과 파일명)
```

## 현재 사용가능
완성된 기능은 없다는 점에서 유의하시기 바랍니다. 현재 체크된 부분은 부분적으로나마 구현된 부분입니다.

* 취소선 등의 글자 효과
* 목차, include, math 등의 한 줄 매크로
* 리스트 형태 문법


## 요구되는 확장기능

미디어위키 변환도구에서 온전하게 사용하려면 다음과 같은 확장기능을 설치하셔야 제대로 작동합니다.
* Cite (각주 처리)
* Math 또는 SimpleMathJax (수식 처리)
* ParserFunction (일부 매크로는 파서함수를 사용하므로)
* SyntaxHighlight (문법 강조)
* [{{색}} 틀 - 리브레 위키 참조](https://librewiki.net/wiki/틀:색) - 보기 좋게 정리하기 위해 사용합니다.
* [{{각주}} 틀 - 리브레 위키 참조](https://librewiki.net/wiki/틀:각주) - 보기 좋게 정리하기 위해 사용합니다.
* [{{숨김 시작}}, {{숨김 끝}} 틀 - 리브레 위키 참조](https://librewiki.net/wiki/틀:숨김_시작) - folding 문법 처리를 위해 사용합니다. 

## 미지원 기능
미디어위키 엔진의 한계와 파서로 처리하기 난감한 부분이 있어서 다음과 같은 기능은 당분간 지원하지 않을 예정입니다.
* 각주 기호 `[* ~]`안에 이중각주 혹은 여러 줄 처리할 수 있는 태그 표현
* 다크 모드용 색 지정 태그 `{{{#color1,#color2 contents}}}`
* 파서 처리 방식이 줄 단위로 나눈 뒤 각 줄에 대해 처리하는 방식입니다. 2가지 이상 파서가 조합할 경우 처리가 안 될 수  있습니다.


